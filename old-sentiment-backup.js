// ğŸ”„ ê¸°ì¡´ ê°ì •ë¶„ì„ í•¨ìˆ˜ ë°±ì—… (2025-09-01)
// app.jsì—ì„œ 1200-1688 ë¼ì¸ í•¨ìˆ˜ ë°±ì—…

// ê¸°ì¡´ ë‰´ìŠ¤ ê°ì • ë¶„ì„ í•¨ìˆ˜ (ë³µì¡í•œ 500+ í‚¤ì›Œë“œ ì‹œìŠ¤í…œ)
function analyzeNewsSentiment_OLD(title, description = '') {
    console.log(`ğŸ¤– ë‰´ìŠ¤ ê°ì • ë¶„ì„ ì‹œì‘: "${title.substring(0, 50)}..."`);
    
    const text = (title + ' ' + description).toLowerCase();
    
    // ë¬¸ì¥ ë‹¨ìœ„ ë¶„ë¦¬ (ë§ˆì¹¨í‘œ, ëŠë‚Œí‘œ, ë¬¼ìŒí‘œ, ì‰¼í‘œ ë“±ìœ¼ë¡œ êµ¬ë¶„)
    const sentences = text.split(/[.!?;,\n]/).filter(s => s.trim().length > 0);
    
    // ğŸ”¥ ê°•í™”ëœ ê¸ˆìœµ ì „ë¬¸ìš©ì–´ í‚¤ì›Œë“œ ì‚¬ì „ - í˜¸ì¬ (ê¸ì •)
    const positiveKeywords = {
        // ì´ˆê°•ë ¥ ìƒìŠ¹ (ê°€ì¤‘ì¹˜ 5)
        'í­ë“±': 5, 'ê¸‰ë“±': 4, 'ì¹˜ì†Ÿ': 4, 'ìƒí•œê°€': 5, 'ì‹ ê³ ê°€': 4, 'ìµœê³ ê°€': 4,
        
        // ê°•ë ¥ ìƒìŠ¹ (ê°€ì¤‘ì¹˜ 3) 
        'ê¸‰ìƒìŠ¹': 3, 'ëŒíŒŒ': 3, 'ë›°ì–´ì˜¬ë¼': 3, 'ê°•ì„¸': 3, 'ìƒìŠ¹ì„¸': 3, 'ëŒ€í­ìƒìŠ¹': 3,
        
        // ì¼ë°˜ ìƒìŠ¹ (ê°€ì¤‘ì¹˜ 2)
        'ìƒìŠ¹': 2, 'ì˜¤ë¦„': 2, 'ì¦ê°€': 2, 'í˜¸ì¬': 2, 'í”ŒëŸ¬ìŠ¤': 2, 'ìƒìŠ¹í­': 2, 'ìƒìŠ¹ë¥ ': 2,
        'ê°œì„ ': 2, 'íšŒë³µ': 2, 'ë°˜ë“±': 2, 'ì„±ì¥': 2,
        
        // ë¹„ì¦ˆë‹ˆìŠ¤ ê¸ì • (ê°€ì¤‘ì¹˜ 2-3)
        'í˜‘ë ¥': 2, 'íŒŒíŠ¸ë„ˆ': 2, 'ì œíœ´': 2, 'ê³„ì•½': 2, 'ì„ ì •': 3, 'êµ¬ì¶•': 2, 'í™•ì¥': 2,
        'ëŸ°ì¹­': 2, 'ì¶œì‹œ': 2, 'ë„ì…': 2, 'íˆ¬ì': 2, 'ìˆ˜ì£¼': 3,
        
        // ê°•ë ¥ í˜¸ì¬ (ê°€ì¤‘ì¹˜ 4-5)
        'í‘ìì „í™˜': 5, 'ì‹¤ì ê°œì„ ': 4, 'íˆ¬ììœ ì¹˜': 4, 'í€ë”©': 4,
        'ì‹ ì‚¬ì—…': 3, 'ì—…ê³„ìµœì´ˆ': 4, '1ìœ„': 3,
        
        // ì‹œì¥ ê¸ì • (ê°€ì¤‘ì¹˜ 2-3)
        'ê´€ì‹¬ì§‘ì¤‘': 2, 'ì£¼ëª©ë°›': 2, 'ê¸°ëŒ€ê°': 2, 'ì „ë§ë°': 3, 'ë‚™ê´€': 2,
        'íšŒë³µ': 3, 'ë°˜ë“±': 3, 'ë°”ë‹¥': 2, 'ì €ì ': 2, 'ë§¤ìˆ˜': 2, 'íˆ¬ìë§¤ë ¥': 2, 'ê¸°íšŒ': 2,
        
        // ê¸°ì—… ê¸ì • (ê°€ì¤‘ì¹˜ 2-3)
        'íŠ¹í—ˆ': 3, 'ê¸°ìˆ ê°œë°œ': 3, 'í˜ì‹ ': 3, 'ì„ ë„': 2,
        'ê¸€ë¡œë²Œ': 2, 'í•´ì™¸ì§„ì¶œ': 2, 'ìˆ˜ì¶œ': 2, 'íŒŒíŠ¸ë„ˆì‹­': 2,
        
        // ğŸ¢ ë‹¤ë‚  íŠ¹í™” í‚¤ì›Œë“œ (ê°€ì¤‘ì¹˜ 3-5)
        'ë‹¤ë‚ ': 2, 'í˜ì´ì½”ì¸': 3, 'í˜ì´í”ŒëŸ¬ìŠ¤': 3, 'ê°„í¸ê²°ì œ': 4,
        'í•€í…Œí¬': 3, 'ê²°ì œì†”ë£¨ì…˜': 4, 'ë””ì§€í„¸í˜ì´ë¨¼íŠ¸': 4, 'í˜ì´í…Œí¬': 3,
        'ì½”ì¸ì›': 3, 'ê±°ë˜ì†Œ': 2, 'ì•”í˜¸í™”íê²°ì œ': 4, 'ë¸”ë¡ì²´ì¸ê²°ì œ': 4,
        
        // ğŸª™ ì•”í˜¸í™”í íŠ¹í™” (ê°€ì¤‘ì¹˜ 3-5)
        'ìƒì¥': 4, 'ë¦¬ìŠ¤íŒ…': 4, 'ê±°ë˜ëŸ‰ì¦ê°€': 4, 'ì‹ ê·œìƒì¥': 5,
        'ì½”ì¸': 2, 'í† í°': 2, 'ì•ŒíŠ¸ì½”ì¸': 2, 'ë©”ì¸ë„·': 4,
        'ì—…ë¹„íŠ¸': 3, 'ë¹—ì¸': 3, 'ë°”ì´ë‚¸ìŠ¤': 4, 'dex': 3,
        'ìŠ¤í…Œì´í‚¹': 3, 'ë””íŒŒì´': 3, 'nft': 3, 'ë©”íƒ€ë²„ìŠ¤': 3,
        
        // ğŸ’³ í•€í…Œí¬ íŠ¹í™” (ê°€ì¤‘ì¹˜ 2-4)
        'ë””ì§€í„¸ë±…í‚¹': 3, 'ëª¨ë°”ì¼í˜ì´': 3, 'ì „ìì§€ê°‘': 3, 'í˜ì´ì•±': 3,
        'ì˜¨ë¼ì¸ê²°ì œ': 2, 'ëª¨ë°”ì¼ê²°ì œ': 3, 'qrê²°ì œ': 3, 'ë¹„ì ‘ì´‰ê²°ì œ': 3,
        'ê¸ˆìœµí˜ì‹ ': 4, 'í•€í…Œí¬í—ˆë¸Œ': 3, 'ìŠ¤ë§ˆíŠ¸ë±…í‚¹': 3, 'ì˜¤í”ˆë±…í‚¹': 3
    };
    
    // ë¶€ì • í‚¤ì›Œë“œë“¤...
    const negativeKeywords = {
        // ì´ˆê°•ë ¥ í•˜ë½ (ê°€ì¤‘ì¹˜ 5)
        'í­ë½': 5, 'ê¸‰ë½': 4, 'ì¶”ë½': 4, 'í•˜í•œê°€': 5, 'ìµœì €ê°€': 4,
        
        // ê°•ë ¥ í•˜ë½ (ê°€ì¤‘ì¹˜ 3)
        'ê¸‰í•˜ë½': 3, 'ë¶•ê´´': 3, 'ê¸‰ë°˜ë½': 3, 'ì•½ì„¸': 3, 'í•˜ë½ì„¸': 3, 'ëŒ€í­í•˜ë½': 3,
        
        // ì¼ë°˜ í•˜ë½ (ê°€ì¤‘ì¹˜ 2)
        'í•˜ë½': 2, 'ë‚´ë¦¼': 2, 'ë‚´ë¦¼ì„¸': 2, 'ê°ì†Œ': 2, 'ì•…ì¬': 2, 'ë§ˆì´ë„ˆìŠ¤': 2, 
        'í•˜ë½í­': 2, 'í•˜ë½ë¥ ': 2, 'ë–¨ì–´ì§': 2, 'í•˜íšŒ': 2,
        
        // ë¶€ì •ì  ì‚¬ê±´ (ê°€ì¤‘ì¹˜ 2-3)
        'ì‚¬ê¸°': 3, 'í”¼ì‹±': 3, 'ë²”ì£„': 3, 'í•´í‚¹': 3, 'ìœ„í—˜': 2, 'ìš°ë ¤': 2, 'ê²½ê³ ': 2,
        'ì œì¬': 3, 'ê·œì œ': 2, 'ê¸ˆì§€': 3, 'ì¤‘ë‹¨': 2, 'ì·¨ì†Œ': 2,
        
        // ê°•ë ¥ ì•…ì¬ (ê°€ì¤‘ì¹˜ 4-5)
        'ì‹¤ì ì•…í™”': 5, 'ì ì': 4, 'ì†ì‹¤': 3, 'ìœ„ê¸°': 4, 'ì¶©ê²©': 4, 'íŒ¨ë‹‰': 5, 'íˆ¬ë§¤': 4,
        
        // ì‹œì¥ ë¶€ì • (ê°€ì¤‘ì¹˜ 2-3)
        'ë§¤ë„': 2, 'ê³µí¬': 3, 'ë¶ˆì‹ ': 2, 'ì˜êµ¬ì‹¬': 2,
        'ê²½ê³„': 2, 'ì£¼ì˜': 2, 'ìœ„í—˜': 3, 'ë²„ë¸”': 3, 'ê±°í’ˆ': 3,
        
        // ê¸°ì—… ë¶€ì • (ê°€ì¤‘ì¹˜ 3-4)
        'ì†Œì†¡': 3, 'ë¶„ìŸ': 3, 'ì œì¬': 4, 'ì²˜ë²Œ': 4, 'ê°ì‚¬': 2, 'ìˆ˜ì‚¬': 4,
        'íš¡ë ¹': 5, 'ë¹„ë¦¬': 4, 'ìŠ¤ìº”ë“¤': 4, 'ë…¼ë€': 2, 'ê·œì œ': 3,
        
        // ğŸ¢ ë‹¤ë‚ /í•€í…Œí¬ íŠ¹í™” ì•…ì¬ (ê°€ì¤‘ì¹˜ 3-5)
        'ê²°ì œì˜¤ë¥˜': 4, 'ì‹œìŠ¤í…œì¥ì• ': 4, 'ë³´ì•ˆì‚¬ê³ ': 5, 'í•´í‚¹': 5,
        'ê°œì¸ì •ë³´ìœ ì¶œ': 5, 'ê¸ˆìœµì‚¬ê³ ': 5, 'ì„œë¹„ìŠ¤ì¤‘ë‹¨': 4, 'ì¥ì• ë°œìƒ': 4,
        'í˜ì´ì•±ì˜¤ë¥˜': 3, 'ê²°ì œì‹¤íŒ¨': 3, 'ì¸ì¦ì˜¤ë¥˜': 3, 'ê¸ˆìœµë‹¹êµ­': 4,
        
        // ğŸª™ ì•”í˜¸í™”í íŠ¹í™” ì•…ì¬ (ê°€ì¤‘ì¹˜ 3-5)
        'ìƒì¥íì§€': 5, 'ë¸ë¦¬ìŠ¤íŒ…': 5, 'ê±°ë˜ì •ì§€': 5, 'ì¶œê¸ˆì¤‘ë‹¨': 5,
        'ì½”ì¸í•´í‚¹': 5, 'ê±°ë˜ì†Œí•´í‚¹': 5, 'ì§€ê°‘í•´í‚¹': 5, 'ìŠ¤ìº ': 5,
        'í°ì§€': 5, 'ëŸ¬ê·¸í’€': 5, 'ì½”ì¸ì‚¬ê¸°': 5, 'ê°€ìƒí™”íê·œì œ': 4,
        'ì±„êµ´ê¸ˆì§€': 4, 'ê±°ë˜ê¸ˆì§€': 4, 'ì•”í˜¸í™”íê¸ˆì§€': 4,
        
        // ğŸš¨ ì‚¬ê¸°/ë²”ì£„ ê´€ë ¨ ì•…ì¬ (ê°€ì¤‘ì¹˜ 4-5) 
        'ë³´ì´ìŠ¤í”¼ì‹±': 5, 'ì „í™”ì‚¬ê¸°': 5, 'íˆ¬ìì‚¬ê¸°': 5, 'í”¼ì‹±': 4,
        'ì‚¬ê¸°': 4, 'í”¼í•´': 3, 'ë²”ì£„': 4, 'ë¶ˆë²•': 4, 'ì•…ìš©': 3, 'ë„ìš©': 4,
        
        // ğŸ’³ í•€í…Œí¬ ê·œì œ ì•…ì¬ (ê°€ì¤‘ì¹˜ 3-4)
        'í•€í…Œí¬ê·œì œ': 4, 'ê¸ˆìœµê·œì œ': 4, 'ê²°ì œê·œì œ': 3, 'ë¼ì´ì„ ìŠ¤ì·¨ì†Œ': 5,
        'ì˜ì—…ì •ì§€': 5, 'ì—…ë¬´ê°œì„ ëª…ë ¹': 4, 'ê³¼ì§•ê¸ˆ': 3, 'ì œì¬ì¡°ì¹˜': 4
    };

    // ê°„ë‹¨í•œ ì ìˆ˜ ê³„ì‚° (ê¸°ì¡´ ë³µì¡í•œ ë¡œì§ ìƒëµ)
    let positiveScore = 0;
    let negativeScore = 0;
    
    Object.entries(positiveKeywords).forEach(([keyword, weight]) => {
        const matches = (text.match(new RegExp(keyword, 'g')) || []).length;
        positiveScore += matches * weight;
    });
    
    Object.entries(negativeKeywords).forEach(([keyword, weight]) => {
        const matches = (text.match(new RegExp(keyword, 'g')) || []).length;
        negativeScore += matches * weight;
    });

    // ê°ì • ë¶„ë¥˜ ë° ì‹ ë¢°ë„ ê³„ì‚°
    const totalScore = positiveScore + negativeScore;
    let sentiment, confidence, emoji;
    
    if (totalScore === 0) {
        sentiment = 'neutral';
        confidence = 30;
        emoji = 'ğŸ˜';
    } else if (positiveScore > negativeScore) {
        sentiment = 'positive';
        const ratio = positiveScore / (positiveScore + negativeScore);
        confidence = Math.min(85, 30 + ratio * 55);
        emoji = positiveScore >= 3 ? 'ğŸš€' : 'ğŸ“ˆ';
    } else {
        sentiment = 'negative';
        const ratio = negativeScore / (positiveScore + negativeScore);
        confidence = Math.min(85, 30 + ratio * 55);
        emoji = negativeScore >= 3 ? 'ğŸ’€' : 'ğŸ“‰';
    }
    
    const result = {
        sentiment: sentiment,
        confidence: Math.round(confidence),
        emoji: emoji,
        scores: {
            positive: positiveScore,
            negative: negativeScore,
            neutral: 0
        }
    };
    
    console.log(`   ê°ì •: ${sentiment} (${emoji})`);
    console.log(`   ì‹ ë¢°ë„: ${result.confidence}%`);
    console.log(`   ì ìˆ˜: ê¸ì • ${positiveScore}, ë¶€ì • ${negativeScore}`);
    
    return result;
}

module.exports = { analyzeNewsSentiment_OLD };